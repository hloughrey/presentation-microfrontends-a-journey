<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />

        <title>Micro-frontends - a journey</title>

        <meta
            property="og:title"
            name="title"
            content="Micro-frontends - a journey"
        />
        <meta
            property="og:description"
            name="description"
            content="Presentation on Purplebricks journey through micro-frontend development"
        />
        <meta name="author" content="Hugh Loughrey & Ben Read" />

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta
            name="apple-mobile-web-app-status-bar-style"
            content="black-translucent"
        />
        <meta
            property="og:image"
            name="image"
            content="../assets/MetaImage.png"
        />
        <meta
            property="og:url"
            name="url"
            content="https://presentation-microfrontends-a-journey.netlify.app"
        />

        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <link rel="stylesheet" href="reveal.js/dist/reset.css" />
        <link rel="stylesheet" href="reveal.js/dist/reveal.css" />
        <link
            rel="stylesheet"
            href="reveal.js/dist/theme/serif.css"
            id="theme"
        />

        <!-- Theme used for syntax highlighting of code -->
        <link
            rel="stylesheet"
            href="reveal.js/plugin/highlight/monokai.css"
            id="highlight-theme"
        />
        <link rel="stylesheet" href="styles.css" />
    </head>

    <body>
        <div class="reveal">
            <!-- Any section element inside of this container is displayed as a slide -->
            <div class="slides">
                <section>
                    <a href="https://www.purplebricks.co.uk/">
                        <img
                            src="https://pbonlineassets.azureedge.net/web-images/marketing-global/logos/pb-logo-dark.svg"
                            alt="Profile Picture"
                            style="
                                height: 180px;
                                margin: 0 auto 4rem auto;
                                background: transparent;
                            "
                            class="demo-logo"
                        />
                    </a>

                    <h3>Micro-frontends - A Journey</h3>
                </section>

                <section>
                    <h3>ðŸ‘‹ Hello Everybody ðŸ‘‹</h3>
                    <div class="profilesContainer">
                        <a
                            class="profileLinks"
                            href="https://www.linkedin.com/in/hugh-loughrey-msc-a84ab84b/"
                        >
                            <img
                                src="./assets/Hugh.png"
                                alt="Hugh profile picture"
                                class="profileImages"
                            />
                            Hugh Loughrey<br />
                            Senior Engineer
                        </a>
                        <a
                            href="https://www.linkedin.com/in/benjaminread1980/"
                            class="profileLinks"
                        >
                            <img
                                src="./assets/Ben.png"
                                alt="Ben profile picture"
                                class="profileImages"
                            />
                            Ben Read<br />
                            Senior Engineer
                        </a>
                    </div>
                </section>

                <section>
                    <h2>Agenda</h2>
                    <ul>
                        <li>Purplebricks frontend journey</li>
                        <li>Problems we were trying to solve</li>
                        <li>How we landed on Nx</li>
                        <li>Benefits & Lessons learnt</li>
                    </ul>
                </section>

                <section>
                    <h2>2014 - 2017</h2>
                    <div class="split-slide">
                        <img
                            class="history-image"
                            src="./assets/MonolithTech.png"
                            alt="ASP .Net Logo"
                            class="profileImages"
                        />
                        <ul>
                            <li>ASP .net monolith</li>
                            <li>React monolith</li>
                            <li class="fright">ðŸ˜¥</li>
                        </ul>
                    </div>
                </section>

                <section>
                    <h2>2017 - 2019</h2>
                    <div class="split-slide">
                        <img
                            class="history-image"
                            src="./assets/Generation_1.png"
                            alt="First generation of Mircro-frontend"
                            class="profileImages"
                        />
                        <ul>
                            <li>Micro-frontends</li>
                            <li>Multiple repositories</li>
                            <li>
                                Custom <strong>React</strong> implementation
                            </li>
                            <li>Consistency & Standards</li>
                        </ul>
                    </div>
                </section>

                <section>
                    <h2>2019 - 2020</h2>
                    <div class="split-slide">
                        <img
                            class="history-image"
                            src="./assets/Generation_2.png"
                            alt="Second generation of Mircro-frontend"
                            class="profileImages"
                        />
                        <ul>
                            <li>MonoRepo</li>
                            <li>Consistent pipelines</li>
                            <li>Code sharing still an issue</li>
                        </ul>
                    </div>
                </section>

                <section>
                    <h2>2020 - ...</h2>
                    <div class="split-slide">
                        <img
                            class="history-image"
                            src="./assets/Generation_3.png"
                            alt="Third generation of Mircro-frontend"
                            class="profileImages"
                        />
                        <ul>
                            <li>Applications & Libraries</li>
                            <li>Standardisation</li>
                            <li>Full Stack</li>
                            <li>Single CLI</li>
                        </ul>
                    </div>
                </section>

                <section>
                    <div class="nx-slide">
                        <img
                            src="./assets/nx_logo.png"
                            alt="Nx logo"
                            class="nx-logo"
                        />
                        <q class="quote">
                            Nx is a smart and extensible build framework to help
                            you architect, test, and build at any scale
                        </q>
                    </div>
                </section>

                <section>
                    <h2>ðŸ˜€ Benefits ðŸ˜€</h2>
                    <ul>
                        <li>Standardised libraries</li>
                        <li>Enforce code standards</li>
                        <li>Code sharing</li>
                        <li>Standardised deployments</li>
                        <li>Versioning</li>
                        <li>Development experience</li>
                    </ul>
                </section>

                <section>
                    <h2>Standardised libraries</h2>
                    <img
                        src="./assets/Libraries.png"
                        alt="Nx logo"
                        class="nx-logo"
                    />
                </section>

                <section>
                    <h2>Code sharing</h2>
                    <video width="700" height="400" controls autoplay>
                        <source src="./assets/Storybook.mov" type="video/mp4" />
                    </video>
                </section>

                <section>
                    <h2>Code standards</h2>
                    <video width="700" height="400" controls autoplay>
                        <source src="./assets/Eslint.mov" type="video/mp4" />
                    </video>
                </section>

                <section>
                    <section>
                        <h2>Deployments</h2>
                        <ul>
                            <li>Single pipeline for all apps</li>
                            <li>
                                <pre class="pre"><code
                                class="bash"
                                data-trim
                                data-line-numbers
                            >
                            nx affected:apps
                            </code></pre>
                            </li>
                        </ul>
                    </section>

                    <section>
                        <pre class="pre"><code
                            class="js"
                            data-noescape
                            data-trim
                            data-line-numbers="1-15|17-33"
                        >
                        (function buildAffectedApplications() {
                            const baseSha =
                                process.env.BUILD_REASON.toLowerCase() === 'pullrequest'
                                    ? 'origin/master'
                                    : 'origin/master~1';

                            const affectedApplications = getAffectedApplications(baseSha);

                            checkForNoAffectedApplications(affectedApplications);
                            buildApplications(baseSha);
                            buildDistFolders(affectedApplications);

                            const affectedApplicationsMatrix = applicationMatrix(affectedApplications);
                            outputApplicationMatrix(affectedApplicationsMatrix);
                        })();

                        function getAffectedApplications(baseSha) {
                            console.log('Checking which applications are affected');

                            const affectedApplications = execSync(
                                `npx nx affected:apps --base=${baseSha} --plain`
                            )
                                .toString()
                                .trim()
                                .split(' ');

                            console.log(
                                'The affected applications are: ',
                                affectedApplications.join(', ')
                            );

                            return affectedApplications;
                        }
                        </code></pre>
                    </section>
                </section>

                <section>
                    <h2>Versioning</h2>
                    <ul>
                        <li>Single version of library</li>
                        <li>Keep all apps in sync</li>
                        <li>Less risk of unexpected breaking changes</li>
                        <li>No sprints wasted bumping library versions</li>
                    </ul>
                </section>

                <section>
                    <section>
                        <h2>Development experience</h2>
                        <ul>
                            <li>Circa 2-3 days to deploy new app to QA</li>
                            <li>
                                <pre class="pre"><code
                                    class="bash"
                                    data-trim
                                    data-line-numbers
                                    >
                                    nx g @nrwl/next:app becky-quotes && yarn generate
                                </code></pre>
                            </li>
                            <li>Easy to onboard new colleagues</li>
                            <li>Automated dependency management</li>
                        </ul>
                    </section>

                    <section>
                        <h2 class="dependency-management-heading">
                            Dependency Management
                        </h2>
                        <ul>
                            <li>Renovate</li>
                            <li>Raises PRs nightly</li>
                            <li>100% unit code coverage</li>
                        </ul>
                    </section>
                </section>

                <section>
                    <h2>ðŸ˜¢ Lessons Learnt ðŸ˜¢</h2>
                    <ul>
                        <li>Library structure & size</li>
                        <li>Build times</li>
                    </ul>
                </section>

                <section>
                    <h2>Dependency Graph</h2>
                    <div class="split-slide">
                        <video controls autoplay class="dependency-graph-video">
                            <source
                                src="./assets/DependencyGraph.mov"
                                type="video/mp4"
                            />
                        </video>
                        <ul class="dependency-graph-points">
                            <li>Nx knows what apps depend on what libraries</li>
                            <li>
                                <pre class="pre"><code
                                class="bash"
                                data-trim
                                data-line-numbers
                            >
                            nx affected:...
                            </code></pre>
                            </li>
                            <li>
                                <a
                                    href="https://nx.dev/latest/angular/structure/creating-libraries"
                                    target="_blank"
                                    >Library strategy</a
                                >
                            </li>
                        </ul>
                    </div>
                </section>

                <section>
                    <h2>Summary</h2>
                    <ul>
                        <li>Really happy with Nx ðŸŽ‰</li>
                        <li>Library strategy is <strong>important</strong></li>
                        <li>Nx supports full stack applications</li>
                        <li>Tonnes of Plugins</li>
                    </ul>
                </section>

                <section>
                    <h2>Questions</h2>
                    <img src="./assets/questions.png" alt="Question mark" />
                </section>

                <section>
                    <h2>Resources</h2>
                    <ul>
                        <li><a href="https://nx.dev">Nx documentation</a></li>
                        <li>
                            <a
                                href="https://www.youtube.com/channel/UCF8luR7ORJTCwSNA9yZksCw"
                                >Nrwl Youtube channel</a
                            >
                        </li>
                        <li>
                            <a href="https://github.com/renovatebot/renovate"
                                >Renovate</a
                            >
                        </li>
                    </ul>
                </section>
            </div>
        </div>

        <script src="reveal.js/dist/reveal.js"></script>
        <script src="reveal.js/plugin/zoom/zoom.js"></script>
        <script src="reveal.js/plugin/notes/notes.js"></script>
        <script src="reveal.js/plugin/search/search.js"></script>
        <script src="reveal.js/plugin/markdown/markdown.js"></script>
        <script src="reveal.js/plugin/highlight/highlight.js"></script>
        <script>
            // Also available as an ES module, see:
            // https://revealjs.com/initialization/
            Reveal.initialize({
                controls: true,
                progress: true,
                center: true,
                hash: true,

                // Learn about plugins: https://revealjs.com/plugins/
                plugins: [
                    RevealZoom,
                    RevealNotes,
                    RevealSearch,
                    RevealMarkdown,
                    RevealHighlight,
                ],
            });

            Reveal.configure({ pdfSeparateFragments: false });
        </script>
    </body>
</html>
